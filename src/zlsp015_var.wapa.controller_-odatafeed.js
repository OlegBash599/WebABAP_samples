sap.ui.define([                                                                                                                                                                                                                                                
		"sap/ui/core/mvc/Controller",                                                                                                                                                                                                                                
		"sap/m/MessageToast"                                                                                                                                                                                                                                         
	],                                                                                                                                                                                                                                                            
	function(Controller, Toast) {                                                                                                                                                                                                                                 
		"use strict";                                                                                                                                                                                                                                                
		return {                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
			getODataModel: function(iSupplyParams) {                                                                                                                                                                                                                    
				return new Promise(function(resolve, reject) {                                                                                                                                                                                                             
					//var serviceUrl = "/sap/opu/odata/SAP/ZLS015_SRV/";                                                                                                                                                                                                      
					var serviceUrl = iSupplyParams.serviceUrl;                                                                                                                                                                                                                
					//var entityPath = "/VariableIDSet";                                                                                                                                                                                                                      
					var entityPath = iSupplyParams.entityPath;                                                                                                                                                                                                                
					var fullEntityPath = serviceUrl.toString() + entityPath.toString();                                                                                                                                                                                       
					var mParametersCreate = {                                                                                                                                                                                                                                 
						serviceUrl: serviceUrl,                                                                                                                                                                                                                                  
						headers: {                                                                                                                                                                                                                                               
							"X-CSRF-Token": "Fetch"                                                                                                                                                                                                                                 
						}                                                                                                                                                                                                                                                        
					};                                                                                                                                                                                                                                                        
					var oModelOdata = new sap.ui.model.odata.v2.ODataModel(serviceUrl, mParametersCreate);                                                                                                                                                                    
					var mParametersRead = {                                                                                                                                                                                                                                   
						filters: iSupplyParams.filters,                                                                                                                                                                                                                          
						success: function(OData, Response) {                                                                                                                                                                                                                     
							resolve(OData);                                                                                                                                                                                                                                         
						},                                                                                                                                                                                                                                                       
						error: function(oError) {                                                                                                                                                                                                                                
							reject(oError);                                                                                                                                                                                                                                         
						}                                                                                                                                                                                                                                                        
					};                                                                                                                                                                                                                                                        
					oModelOdata.read(entityPath, mParametersRead);                                                                                                                                                                                                            
				});                                                                                                                                                                                                                                                        
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			,                                                                                                                                                                                                                                                           
			getJsonModel: function(iSupplyParams) {                                                                                                                                                                                                                     
				return new Promise(function(resolve, reject) {                                                                                                                                                                                                             
					//var serviceUrl = "/sap/opu/odata/SAP/ZTC_ATTACHMENT_SHOW_SRV/";                                                                                                                                                                                         
					var serviceUrl = iSupplyParams.serviceUrl;                                                                                                                                                                                                                
					//var entityPath = "/AttachInfoSet";                                                                                                                                                                                                                      
					var entityPath = iSupplyParams.entityPath;                                                                                                                                                                                                                
					var fullEntityPath = serviceUrl.toString() + entityPath.toString() + "?$filter=(" + iSupplyParams.filters[0].sPath +                                                                                                                                      
						" eq '" + iSupplyParams.filters[0].oValue1 + "')";                                                                                                                                                                                                       
					//var oModelOdata = new sap.ui.model.odata.v2.ODataModel();                                                                                                                                                                                               
					//var filterSend = new sap.ui.model.Filter();                                                                                                                                                                                                             
					var mParametersCreate = {                                                                                                                                                                                                                                 
						serviceUrl: serviceUrl,                                                                                                                                                                                                                                  
						headers: {                                                                                                                                                                                                                                               
							"X-CSRF-Token": "Fetch"                                                                                                                                                                                                                                 
						}                                                                                                                                                                                                                                                        
					};                                                                                                                                                                                                                                                        
					var oModelJson = new sap.ui.model.json.JSONModel();                                                                                                                                                                                                       
					var mParametersRead = {                                                                                                                                                                                                                                   
						filters: iSupplyParams.filters,                                                                                                                                                                                                                          
						success: function(OData, Response) {                                                                                                                                                                                                                     
							resolve(oModelJson);                                                                                                                                                                                                                                    
						},                                                                                                                                                                                                                                                       
						error: function(oError) {                                                                                                                                                                                                                                
							reject(oError);                                                                                                                                                                                                                                         
						}                                                                                                                                                                                                                                                        
					};                                                                                                                                                                                                                                                        
					// oModelJson.loadData(fullEntityPath, mParametersRead);                                                                                                                                                                                                  
					// oModelJson.attachRequestCompleted(function(){                                                                                                                                                                                                          
					// 	resolve(oModelJson, "Atta");                                                                                                                                                                                                                          
					// });                                                                                                                                                                                                                                                    
					oModelJson.loadData(fullEntityPath, "local", true, "GET", true);                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
					oModelJson.attachRequestCompleted(function() {                                                                                                                                                                                                            
						resolve(oModelJson);                                                                                                                                                                                                                                     
					});                                                                                                                                                                                                                                                       
				});                                                                                                                                                                                                                                                        
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			,                                                                                                                                                                                                                                                           
			createRequest: function(iSupplyParams) {                                                                                                                                                                                                                    
				return new Promise(function(resolve, reject) {                                                                                                                                                                                                             
					//var serviceUrl = "/sap/opu/odata/SAP/ZTC_ATTACHMENT_SHOW_SRV/";                                                                                                                                                                                         
					var serviceUrl = iSupplyParams.serviceUrl;                                                                                                                                                                                                                
					//var entityPath = "/AttachInfoSet";                                                                                                                                                                                                                      
					var entityPath = iSupplyParams.entityPath;                                                                                                                                                                                                                
					var fullEntityPath = serviceUrl.toString() + entityPath.toString();                                                                                                                                                                                       
					var mParametersConstructor = {                                                                                                                                                                                                                            
						serviceUrl: serviceUrl,                                                                                                                                                                                                                                  
						headers: {                                                                                                                                                                                                                                               
							"X-CSRF-Token": "Fetch"                                                                                                                                                                                                                                 
						}                                                                                                                                                                                                                                                        
					};                                                                                                                                                                                                                                                        
					var oModelOdata = new sap.ui.model.odata.v2.ODataModel(serviceUrl, mParametersConstructor);                                                                                                                                                               
					var mParametersCreateMethod = {                                                                                                                                                                                                                           
						success: function(OData, Response) {                                                                                                                                                                                                                     
							resolve(OData);                                                                                                                                                                                                                                         
						},                                                                                                                                                                                                                                                       
						error: function(oError) {                                                                                                                                                                                                                                
							reject(oError);                                                                                                                                                                                                                                         
						}                                                                                                                                                                                                                                                        
					};                                                                                                                                                                                                                                                        
					oModelOdata.create(entityPath, iSupplyParams.Entry, mParametersCreateMethod);                                                                                                                                                                             
				});                                                                                                                                                                                                                                                        
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			,                                                                                                                                                                                                                                                           
			updateRequest: function(iSupplyParams) {                                                                                                                                                                                                                    
				return new Promise(function(resolve, reject) {                                                                                                                                                                                                             
					var mParameters = {                                                                                                                                                                                                                                       
						headers: {                                                                                                                                                                                                                                               
							"Content-ID": "102",                                                                                                                                                                                                                                    
							"X-CSRF-Token": "Fetch"                                                                                                                                                                                                                                 
						},                                                                                                                                                                                                                                                       
						//defaultUpdateMethod: sap.ui.model.odata.UpdateMethod.Put,                                                                                                                                                                                              
						useBatch: false                                                                                                                                                                                                                                          
					};                                                                                                                                                                                                                                                        
					                                                                                                                                                                                                                                                          
					var oModelUpdate = new sap.ui.model.odata.v2.ODataModel(iSupplyParams.serviceUrl, mParameters);                                                                                                                                                           
//					oModelUpdate.update("/TechMsgShortSet(MessageId='" + Entry.MessageId.toString() + "')", Entry);                                                                                                                                                         
					oModelUpdate.update(iSupplyParams.entityPath, iSupplyParams.Entry);                                                                                                                                                                                       
					oModelUpdate.attachRequestCompleted(this, function(Response) {                                                                                                                                                                                            
						if(Response.getParameter("success")){                                                                                                                                                                                                                    
							resolve(Response);                                                                                                                                                                                                                                      
						}else{                                                                                                                                                                                                                                                   
							reject(Response);                                                                                                                                                                                                                                       
						}                                                                                                                                                                                                                                                        
					});                                                                                                                                                                                                                                                       
				});                                                                                                                                                                                                                                                        
			}                                                                                                                                                                                                                                                           
			                                                                                                                                                                                                                                                            
			                                                                                                                                                                                                                                                            
			, deleteRequest: function(iSupplyParams) {                                                                                                                                                                                                                  
				return new Promise(function(resolve, reject) {                                                                                                                                                                                                             
					var serviceUrl = iSupplyParams.serviceUrl;                                                                                                                                                                                                                
					var entityPath = iSupplyParams.entityPath;                                                                                                                                                                                                                
					var fullEntityPath = serviceUrl.toString() + entityPath.toString();                                                                                                                                                                                       
					var mParameters = {                                                                                                                                                                                                                                       
						headers: {                                                                                                                                                                                                                                               
							"Content-ID": "102",                                                                                                                                                                                                                                    
							"X-CSRF-Token": "Fetch"                                                                                                                                                                                                                                 
						},                                                                                                                                                                                                                                                       
						//defaultUpdateMethod: sap.ui.model.odata.UpdateMethod.Put,                                                                                                                                                                                              
						useBatch: false                                                                                                                                                                                                                                          
					};                                                                                                                                                                                                                                                        
					                                                                                                                                                                                                                                                          
					var oModelRemove = new sap.ui.model.odata.v2.ODataModel(iSupplyParams.serviceUrl, mParameters);                                                                                                                                                           
//					oModelUpdate.update("/TechMsgShortSet(MessageId='" + Entry.MessageId.toString() + "')", Entry);                                                                                                                                                         
					oModelRemove.remove(iSupplyParams.entityPath);                                                                                                                                                                                                            
					oModelRemove.attachRequestCompleted(this, function(Response) {                                                                                                                                                                                            
						if(Response.getParameter("success")){                                                                                                                                                                                                                    
							resolve(Response);                                                                                                                                                                                                                                      
						}else{                                                                                                                                                                                                                                                   
							reject(Response);                                                                                                                                                                                                                                       
						}                                                                                                                                                                                                                                                        
					});                                                                                                                                                                                                                                                       
				});                                                                                                                                                                                                                                                        
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			,                                                                                                                                                                                                                                                           
			getODataFromModel: function(iSupplyParams) {                                                                                                                                                                                                                
				return new Promise(function(resolve, reject) {                                                                                                                                                                                                             
					//var serviceUrl = "/sap/opu/odata/SAP/ZTC_ATTACHMENT_SHOW_SRV/";                                                                                                                                                                                         
					var serviceUrl = iSupplyParams.serviceUrl;                                                                                                                                                                                                                
					//var entityPath = "/AttachInfoSet";                                                                                                                                                                                                                      
					var entityPath = iSupplyParams.entityPath;                                                                                                                                                                                                                
					var fullEntityPath = serviceUrl.toString() + entityPath.toString();                                                                                                                                                                                       
					var mParametersCreate = {                                                                                                                                                                                                                                 
						serviceUrl: serviceUrl,                                                                                                                                                                                                                                  
						headers: {                                                                                                                                                                                                                                               
							"X-CSRF-Token": "Fetch"                                                                                                                                                                                                                                 
						}                                                                                                                                                                                                                                                        
					};                                                                                                                                                                                                                                                        
					var oModelOdata = new sap.ui.model.odata.v2.ODataModel(serviceUrl, mParametersCreate);                                                                                                                                                                    
					var mParametersRead = {                                                                                                                                                                                                                                   
						filters: iSupplyParams.filters,                                                                                                                                                                                                                          
						success: function(OData, Response) {                                                                                                                                                                                                                     
							resolve(OData);                                                                                                                                                                                                                                         
						},                                                                                                                                                                                                                                                       
						error: function(oError) {                                                                                                                                                                                                                                
							reject(oError);                                                                                                                                                                                                                                         
						}                                                                                                                                                                                                                                                        
					};                                                                                                                                                                                                                                                        
					oModelOdata.read(entityPath, mParametersRead);                                                                                                                                                                                                            
				});                                                                                                                                                                                                                                                        
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			,                                                                                                                                                                                                                                                           
			getJsonModelEntity: function(iSupplyParams) {                                                                                                                                                                                                               
				return new Promise(function(resolve, reject) {                                                                                                                                                                                                             
					var serviceUrl = iSupplyParams.serviceUrl;                                                                                                                                                                                                                
					var entityPath = iSupplyParams.entityPath;                                                                                                                                                                                                                
					var fullEntityPath = serviceUrl.toString() + entityPath.toString();                                                                                                                                                                                       
					//var oModelOdata = new sap.ui.model.odata.v2.ODataModel();                                                                                                                                                                                               
					//var filterSend = new sap.ui.model.Filter();                                                                                                                                                                                                             
					var mParametersCreate = {                                                                                                                                                                                                                                 
						serviceUrl: serviceUrl,                                                                                                                                                                                                                                  
						headers: {                                                                                                                                                                                                                                               
							"X-CSRF-Token": "Fetch"                                                                                                                                                                                                                                 
						}                                                                                                                                                                                                                                                        
					};                                                                                                                                                                                                                                                        
					var oModelJson = new sap.ui.model.json.JSONModel();                                                                                                                                                                                                       
					var mParametersRead = {                                                                                                                                                                                                                                   
						filters: iSupplyParams.filters,                                                                                                                                                                                                                          
						success: function(OData, Response) {                                                                                                                                                                                                                     
							resolve(oModelJson);                                                                                                                                                                                                                                    
						},                                                                                                                                                                                                                                                       
						error: function(oError) {                                                                                                                                                                                                                                
							reject(oError);                                                                                                                                                                                                                                         
						}                                                                                                                                                                                                                                                        
					};                                                                                                                                                                                                                                                        
					oModelJson.loadData(fullEntityPath, "local", true, "GET", true);                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
					oModelJson.attachRequestCompleted(function() {                                                                                                                                                                                                            
						resolve(oModelJson);                                                                                                                                                                                                                                     
					});                                                                                                                                                                                                                                                       
				});                                                                                                                                                                                                                                                        
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			,                                                                                                                                                                                                                                                           
			AttachFileGet: function(FileParams) {                                                                                                                                                                                                                       
				var path2File = this.getPath2FileSrv(FileParams);                                                                                                                                                                                                          
				var w = window.open(path2File, '_blank');                                                                                                                                                                                                                  
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			,                                                                                                                                                                                                                                                           
			getPath2FileSrv: function(FileParams) {                                                                                                                                                                                                                     
				var path2file = "/sap/opu/odata/SAP/ZTC_ATTACHMENT_SHOW_SRV/AttachFileGetSet(" +                                                                                                                                                                           
					"ArchivId='" + FileParams.ArchivId +                                                                                                                                                                                                                      
					"',DocId='" + FileParams.DocId +                                                                                                                                                                                                                          
					"',FileName='" + this._getPrepareFileName(FileParams.FileName) +                                                                                                                                                                                          
					"',StreamMode='" + FileParams.StreamMode +                                                                                                                                                                                                                
					"')/$value";                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
				return path2file;                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			,                                                                                                                                                                                                                                                           
			_getPrepareFileName: function(iFileName) {                                                                                                                                                                                                                  
				var preparedFileName = encodeURI(iFileName.toString());                                                                                                                                                                                                    
				preparedFileName = preparedFileName.replace("/", "_");                                                                                                                                                                                                     
				return preparedFileName;                                                                                                                                                                                                                                   
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		};                                                                                                                                                                                                                                                           
	});                                                                                                                                                                                                                                                           